# 동물의 사생활

## 소개

동물의 사생활은 동물 프로필 기반의 반 익명 채팅 어플리케이션입니다. 반 익명이라 함은 완전한 익명도 아니고 사용자의 얼굴을 드러내는 것도 아니라는 뜻입니다. 이런 목적의 채팅 어플리케이션을 기획한 이유는 현재 채팅 앱이 랜덤채팅과 소개팅 앱으로 구분되는데 랜덤채팅은 완전한 익명성이라 안좋은 목적으로 사용되는 경우가 많고 소개팅 앱은 목적자체가 소개팅일 뿐더러 외모의 가중치가 높기 때문에 단순한 채팅을 하되 제대로된 채팅을 하게 해주기 위함입니다.

## 요구조건

### 홈

- `HomeAPI` 초기화
- 프로필 데이터 가져오기
- 친구/친구신청 데이터 가져오기
  - 친구목록 스트림 연결
    1. 친구있을시 친구 데이터 갱신
    2. 친구 증가/감소에 따른 데이터 갱신
  - 친구신청 목록 스트림 연결
    1. 친구신청 있을시 친구신청 데이터 갱신
    2. 친구신청 증가/감소에 따른 데이터 갱신
- 모든 채팅 데이터 가져오기
  - 각 채팅방의 채팅 알림 가져오기
  - 각 채팅방 스트림 연결
    1. 채팅 있을시 채팅/채팅방 목록 데이터 갱신
    2. 새로운 채팅에 따른 채팅/채팅방 목록 데이터 갱신
    3. 채팅방 삭제에 따른 채팅/채팅방 목록 데이터 갱신

### 랜덤매칭

* 대기중인 방 찾기
  * 방 없으면 방 생성
    - 상대방 기다리는 스트림 연결
    - 상대방 들어옴
      - 사용자 정보 가져오기
      - 채팅내용 스트림 연결
      - 채팅에서 나가는지 확인하는 스트림 연결
  * 방 있으면 입장
    - 사용자 정보 가져오기
    - 채팅내용 스트림 연결
    - 채팅에서 나가는지 확인하는 스트림 연결
* 채팅방 나가기
  * 채팅내용 스트림 해제
  * 채팅에서 나가는지 확인하는 스트림 해제

### 친구

* 친구와 채팅
  * 채팅을 보냄
    * 로컬에서 바로 업데이트
    * 서버에 전송
  * 채팅을 받음
    * 로컬에서 업데이트
* 친구 차단
  * 차단을 함
    * 서버에서 차단
    * 채팅방 스트림 해제
  * 차단을 당함
    * 채팅방 스트림 해제
  * 친구목록갱신 → 둘 다 친구목록 스트림으로 인해 로컬에서 갱신됨

### 친구신청

* 친구신청 수락
  * 서버에서 수락
  * 채팅방 스트림 연결
  * 매칭화면, 프로필 화면 갱신
* 친구신청 삭제
  * 서버에서 삭제
  * 매칭화면, 프로필 화면 갱신
* 친구목록 갱신 → 둘 다 친구목록 스트림으로 인해 로컬에서 갱신됨
* 친구신청 목록 갱신 → 둘 다 친구신청 목록 스트림으로 인해 로컬에서 갱신됨